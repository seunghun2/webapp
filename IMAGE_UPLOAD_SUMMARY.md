# ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ! ğŸ‰

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. **Cloudflare R2 ì„¤ì •**
- âœ… `wrangler.jsonc`ì— R2 ë°”ì¸ë”© ì¶”ê°€
- âœ… ê°œë°œìš© ë²„í‚·: `webapp-images-dev`
- âœ… í”„ë¡œë•ì…˜ ë²„í‚·: `webapp-images`

### 2. **ë°±ì—”ë“œ API êµ¬í˜„**
- âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ ì—”ë“œí¬ì¸íŠ¸: `POST /api/admin/upload-image`
  - íŒŒì¼ íƒ€ì… ê²€ì¦ (JPG, PNG, WEBP, GIF)
  - íŒŒì¼ í¬ê¸° ì œí•œ (5MB)
  - R2ì— ìë™ ì €ì¥
  - ê³ ìœ  íŒŒì¼ëª… ìƒì„± (`properties/timestamp-random.ext`)
  - Public URL ë°˜í™˜

- âœ… ì´ë¯¸ì§€ ì‚­ì œ ì—”ë“œí¬ì¸íŠ¸: `DELETE /api/admin/delete-image/:filename`
  - R2ì—ì„œ íŒŒì¼ ì‚­ì œ

### 3. **í”„ë¡ íŠ¸ì—”ë“œ UI êµ¬í˜„**
- âœ… íŒŒì¼ ì„ íƒ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì˜ì—­
- âœ… ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
- âœ… ìë™ ì—…ë¡œë“œ ê¸°ëŠ¥
- âœ… ì—…ë¡œë“œ ìƒíƒœ í‘œì‹œ (ë¡œë”©, ì„±ê³µ, ì‹¤íŒ¨)
- âœ… ì´ë¯¸ì§€ ì œê±° ë²„íŠ¼
- âœ… URL ì§ì ‘ ì…ë ¥ ì˜µì…˜ (ëŒ€ì•ˆ)

### 4. **JavaScript í•¨ìˆ˜**
```javascript
- handleImageSelect(event)  // íŒŒì¼ ì„ íƒ ì²˜ë¦¬
- uploadImage()             // R2 ì—…ë¡œë“œ ì‹¤í–‰
- removeImage()             // ì´ë¯¸ì§€ ì œê±°
```

---

## â³ ë‚¨ì€ ì‘ì—… (R2 í™œì„±í™” í•„ìš”)

### ë‹¨ê³„ 1: Cloudflare Dashboardì—ì„œ R2 í™œì„±í™”
1. https://dash.cloudflare.com ì ‘ì†
2. ì™¼ìª½ ë©”ë‰´ â†’ **"R2"** í´ë¦­
3. **"Enable R2"** ë˜ëŠ” **"Purchase R2"** í´ë¦­
4. ê²°ì œ ìˆ˜ë‹¨ ë“±ë¡ (í•„ìš”ì‹œ)

**R2 ë¬´ë£Œ í•œë„:**
- ì €ì¥: 10GB/ì›”
- ì—…ë¡œë“œ: 100ë§Œ ê±´/ì›”
- ë‹¤ìš´ë¡œë“œ: 1000ë§Œ ê±´/ì›”
â†’ ì¶©ë¶„í•©ë‹ˆë‹¤!

### ë‹¨ê³„ 2: ë²„í‚· ìƒì„±
```bash
cd /home/user/webapp

# ê°œë°œìš©
npx wrangler r2 bucket create webapp-images-dev

# í”„ë¡œë•ì…˜ìš©
npx wrangler r2 bucket create webapp-images
```

### ë‹¨ê³„ 3: Public Access ì„¤ì •

**ì˜µì…˜ A: R2.dev ì„œë¸Œë„ë©”ì¸ (ê°„ë‹¨)**
1. Dashboard â†’ R2 â†’ ë²„í‚· ì„ íƒ
2. Settings â†’ Public Access â†’ "Allow Access"
3. `https://pub-xxxxx.r2.dev` URL íšë“

**ì˜µì…˜ B: Custom Domain (ê¶Œì¥)**
```bash
npx wrangler r2 bucket domain add webapp-images images.hanchae365.com
```

### ë‹¨ê³„ 4: ì½”ë“œì— Public URL ì ìš©
`src/index.tsx` íŒŒì¼ 2752ë²ˆ ë¼ì¸ ê·¼ì²˜:

**í˜„ì¬:**
```typescript
const imageUrl = `https://webapp-images.YOUR_ACCOUNT_ID.r2.cloudflarestorage.com/${filename}`
```

**ìˆ˜ì • í›„ (R2.dev ì‚¬ìš© ì‹œ):**
```typescript
const imageUrl = `https://pub-xxxxx.r2.dev/${filename}`
```

**ë˜ëŠ” (Custom Domain ì‚¬ìš© ì‹œ):**
```typescript
const imageUrl = `https://images.hanchae365.com/${filename}`
```

### ë‹¨ê³„ 5: ì¬ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
```bash
cd /home/user/webapp
npm run build
pm2 restart webapp

# í…ŒìŠ¤íŠ¸
# 1. ê´€ë¦¬ì ë¡œê·¸ì¸
# 2. ì‹ ê·œ ë“±ë¡
# 3. ëŒ€í‘œì´ë¯¸ì§€ ì„¹ì…˜ì—ì„œ ì´ë¯¸ì§€ ì„ íƒ
# 4. ìë™ ì—…ë¡œë“œ í™•ì¸
```

### ë‹¨ê³„ 6: í”„ë¡œë•ì…˜ ë°°í¬
```bash
cd /home/user/webapp
npm run build
npx wrangler pages deploy dist --project-name webapp
```

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
webapp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.tsx           # ì´ë¯¸ì§€ ì—…ë¡œë“œ API + UI ì½”ë“œ í¬í•¨
â”œâ”€â”€ wrangler.jsonc          # R2 ë°”ì¸ë”© ì„¤ì •
â”œâ”€â”€ R2_SETUP.md            # ìƒì„¸ ì„¤ì • ê°€ì´ë“œ
â””â”€â”€ IMAGE_UPLOAD_SUMMARY.md # ì´ íŒŒì¼
```

---

## ğŸ¨ UI ë¯¸ë¦¬ë³´ê¸°

### ê´€ë¦¬ì í¼ - ëŒ€í‘œì´ë¯¸ì§€ ì„¹ì…˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ëŒ€í‘œì´ë¯¸ì§€ (ì„ íƒ)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  [ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€]                  [X]  â”‚
â”‚                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   ğŸ“¤                                 â”‚ â”‚
â”‚ â”‚   íŒŒì¼ ì„ íƒ ë˜ëŠ” ë“œë˜ê·¸ ì•¤ ë“œë¡­      â”‚ â”‚
â”‚ â”‚   JPG, PNG, WEBP, GIF (ìµœëŒ€ 5MB)    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë˜ëŠ” URL ì§ì ‘ ì…ë ¥ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                          â”‚
â”‚ [https://example.com/image.jpg       ] â”‚
â”‚                                          â”‚
â”‚ âœ… ì—…ë¡œë“œ ì™„ë£Œ!                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: File API, FormData, FileReader
- **Backend**: Hono Framework
- **Storage**: Cloudflare R2
- **File Upload**: Multipart Form Data
- **Image Preview**: Data URL (Base64)

---

## ğŸš€ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ A: R2 ì—†ì´ ë¨¼ì € ë°°í¬
- URL ì§ì ‘ ì…ë ¥ ë°©ì‹ë§Œ ì‚¬ìš©
- ì™¸ë¶€ ì´ë¯¸ì§€ í˜¸ìŠ¤íŒ… (imgur, cloudinary ë“±) í™œìš©
- ë‚˜ì¤‘ì— R2 í™œì„±í™” í›„ ì—…ê·¸ë ˆì´ë“œ

### ì‹œë‚˜ë¦¬ì˜¤ B: R2 í™œì„±í™” í›„ ì™„ì „ ë°°í¬ (ê¶Œì¥)
1. R2 í™œì„±í™”
2. ë²„í‚· ìƒì„±
3. Public URL ì„¤ì •
4. ì½”ë“œ ìˆ˜ì •
5. ì™„ì „ ë°°í¬

---

## ğŸ“Š ì˜ˆìƒ ë¹„ìš©

### ì›” ì‚¬ìš©ëŸ‰ ì˜ˆìƒ (ì†Œê·œëª¨ ì„œë¹„ìŠ¤):
- ì´ë¯¸ì§€ 100ê°œ ì—…ë¡œë“œ (í‰ê·  500KB) = 50MB
- ì›” 1ë§Œ í˜ì´ì§€ë·° Ã— 1 ì´ë¯¸ì§€/í˜ì´ì§€ = 1ë§Œ ë‹¤ìš´ë¡œë“œ

### R2 ë¬´ë£Œ í•œë„:
- âœ… ì €ì¥: 10GB (200ë°° ì—¬ìœ )
- âœ… ì—…ë¡œë“œ: 100ë§Œ ê±´ (1ë§Œë°° ì—¬ìœ )
- âœ… ë‹¤ìš´ë¡œë“œ: 1000ë§Œ ê±´ (1000ë°° ì—¬ìœ )

**ê²°ë¡ : ì™„ì „ ë¬´ë£Œë¡œ ì‚¬ìš© ê°€ëŠ¥! ğŸ’°**

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

1. â³ **R2 í™œì„±í™”** (ê°€ì¥ ì¤‘ìš”!)
2. â³ ë²„í‚· ìƒì„±
3. â³ Public URL ì„¤ì •
4. â³ ì½”ë“œì— URL ì ìš©
5. â³ í…ŒìŠ¤íŠ¸
6. â³ í”„ë¡œë•ì…˜ ë°°í¬

---

## ğŸ’¡ ì°¸ê³  ì‚¬í•­

### ë³´ì•ˆ
- R2ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **Private**ì…ë‹ˆë‹¤
- Public Access í™œì„±í™” ì‹œì—ë§Œ ì™¸ë¶€ ì ‘ê·¼ ê°€ëŠ¥
- ì—…ë¡œë“œëŠ” ê´€ë¦¬ì í˜ì´ì§€ì—ì„œë§Œ ê°€ëŠ¥ (ì¸ì¦ í•„ìš”)

### íŒŒì¼ ê´€ë¦¬
- ê³ ìœ  íŒŒì¼ëª… ìë™ ìƒì„± (ì¤‘ë³µ ë°©ì§€)
- `properties/` í´ë”ì— ì •ë¦¬
- ì‚­ì œ API ì œê³µ (ê´€ë¦¬ ìš©ì´)

### ì„±ëŠ¥
- CDN ìë™ ì ìš© (ì „ ì„¸ê³„ ë¹ ë¥¸ ì†ë„)
- ì´ë¯¸ì§€ ìµœì í™” ê¶Œì¥ (ì—…ë¡œë“œ ì „ ì••ì¶•)

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- **ìƒì„¸ ì„¤ì • ê°€ì´ë“œ**: `R2_SETUP.md`
- **í”„ë¡œì íŠ¸ README**: `README.md`
- **Cloudflare R2 ê³µì‹ ë¬¸ì„œ**: https://developers.cloudflare.com/r2/

---

**í˜„ì¬ ìƒíƒœ: ì½”ë“œ 100% ì™„ì„±! R2 í™œì„±í™”ë§Œ í•˜ë©´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥! ğŸ‰**
